def generate_html_report(user, analysis, books):
    """
    PDF ëŒ€ì‹  HTML íŒŒì¼ ìƒì„± í›„ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ë°©ì‹
    (ë¸Œë¼ìš°ì €ì—ì„œ PDF ë³€í™˜ ê°€ëŠ¥)
    """

    html = f"""
    <html>
    <head>
        <meta charset="UTF-8" />
        <style>
            body {{
                font-family: 'Noto Sans KR', sans-serif;
                margin: 40px;
                line-height: 1.7;
            }}
            h1 {{
                color: #16499A;
                font-size: 32px;
                text-align: center;
                margin-bottom: 10px;
            }}
            h2 {{
                color: #16499A;
                border-bottom: 2px solid #16499A;
                padding-bottom: 5px;
                margin-top: 40px;
            }}
            .info {{
                font-size: 16px;
                margin-top: 20px;
            }}
            table {{
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
            }}
            th {{
                background: #16499A;
                color: white;
                padding: 8px;
                border: 1px solid #888;
            }}
            td {{
                padding: 8px;
                border: 1px solid #888;
                vertical-align: top;
            }}
            .section {{
                margin-top: 20px;
            }}
        </style>
    </head>

    <body>

        <h1>í•™ìƒë¶€ ë§ì¶¤í˜• ë¶„ì„ ë¦¬í¬íŠ¸</h1>

        <div class="info">
            <b>ì´ë¦„:</b> {user['name']}<br/>
            <b>í•™êµ:</b> {user['school']}<br/>
            <b>ì§€ì› í•™ë…„ë„:</b> {user['year']}<br/>
        </div>

        <h2>ğŸ“˜ ì¢…í•© ë¶„ì„ ìš”ì•½</h2>

        <div class="section">
            <b>í•œ ì¤„ ìš”ì•½:</b><br/>
            {analysis['summary']}<br/><br/>

            <b>ê°•ì :</b><br/>
            {'<br/>'.join('- ' + s for s in analysis['strengths'])}<br/><br/>

            <b>ì•½ì :</b><br/>
            {'<br/>'.join('- ' + w for w in analysis['weaknesses'])}<br/><br/>

            <b>3í•™ë…„ ë³´ì™„ ì „ëµ:</b><br/>
            - í”„ë¡œì íŠ¸: {', '.join(analysis['suggestions']['projects'])}<br/>
            - ë³´ê³ ì„œ ì£¼ì œ: {', '.join(analysis['suggestions']['reports'])}<br/>
            - ì¶”ì²œ ë…ì„œ: {', '.join(analysis['suggestions']['books'])}<br/>
            - í•™ê¸‰/í•™ë…„ í™œë™: {analysis['suggestions']['class_activity']}<br/>
            - ë¦¬ë”ì‹­/í˜‘ë ¥: {analysis['suggestions']['leadership']}<br/>
        </div>

        <h2>ğŸ“š ë…ì„œí™œë™ ë¶„ì„</h2>

        <table>
            <tr>
                <th>ë„ì„œëª…</th>
                <th>ì €ì</th>
                <th>í•µì‹¬ ìš”ì•½</th>
                <th>ì „ê³µ ì—°ê³„</th>
                <th>í”„ë¡œì íŠ¸ ì œì•ˆ</th>
            </tr>
    """

    # í…Œì´ë¸” í–‰ ì¶”ê°€
    for b in books:
        html += f"""
            <tr>
                <td>{b['title']}</td>
                <td>{b['author']}</td>
                <td>{"<br/>".join(b['summary']['summary_text'])}</td>
                <td>{"<br/>".join(b['summary']['major_links'])}</td>
                <td>{"<br/>".join(b['summary']['projects'])}</td>
            </tr>
        """

    html += """
        </table>

        <br/><br/>
        <div style="text-align:center; font-size:12px; color:#666;">
            Generated by AI Student Record Analyzer
        </div>

    </body>
    </html>
    """

    return html.encode("utf-8")
